<!DOCTYPE html>
<html lang="en">

<head>
    <title>ARte Dashboard</title>
    <!-- HTML5 Shim and Respond.js IE10 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 10]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
      <![endif]-->
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Dashboard of the ARte web app">
    <meta name="keywords" content="">
    <meta name="author" content="ARte team">
    <!-- Favicon icon -->
    <link rel="icon" href="../files/assets/images/arte_icon.png" type="image/x-icon">
    <!-- Google font-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,800" rel="stylesheet">
    <!-- Required Fremwork -->
    <link rel="stylesheet" type="text/css" href="..\files\bower_components\bootstrap\css\bootstrap.min.css">
    <!-- themify-icons line icon -->
    <link rel="stylesheet" type="text/css" href="..\files\assets\icon\themify-icons\themify-icons.css">
    <!-- ico font -->
    <link rel="stylesheet" type="text/css" href="..\files\assets\icon\icofont\css\icofont.css">
    <!-- feather Awesome -->
    <link rel="stylesheet" type="text/css" href="..\files\assets\icon\feather\css\feather.css">
    <!-- Style.css -->
    <link rel="stylesheet" type="text/css" href="..\files\assets\css\style.css">
    <link rel="stylesheet" type="text/css" href="..\files\assets\css\jquery.mCustomScrollbar.css">
</head>

<body>
<!-- Pre-loader start -->
<div class="theme-loader">
    <div class="ball-scale">
        <div class='contain'>
            <div class="ring">
                <div class="frame"></div>
            </div>
            <div class="ring">
                <div class="frame"></div>
            </div>
            <div class="ring">
                <div class="frame"></div>
            </div>
            <div class="ring">
                <div class="frame"></div>
            </div>
            <div class="ring">
                <div class="frame"></div>
            </div>
            <div class="ring">
                <div class="frame"></div>
            </div>
            <div class="ring">
                <div class="frame"></div>
            </div>
            <div class="ring">
                <div class="frame"></div>
            </div>
            <div class="ring">
                <div class="frame"></div>
            </div>
            <div class="ring">
                <div class="frame"></div>
            </div>
        </div>
    </div>
</div>
<!-- Pre-loader end -->
<div id="pcoded" class="pcoded">
    <div class="pcoded-overlay-box"></div>
    <div class="pcoded-container navbar-wrapper">

        <nav class="navbar header-navbar pcoded-header">
            <div class="navbar-wrapper">

                <div class="navbar-logo">
                    <a class="mobile-menu" id="mobile-collapse" href="#!">
                        <i class="feather icon-menu"></i>
                    </a>
                    <a href="index.htm">
                      <!--<img class="img-fluid" src="..\files\assets\images\logo.png" alt="Theme-Logo">-->
                      <img class="img-fluid" src="..\files\assets\images\arte_logo.png" alt="Logo">
                    </a>
                    <a class="mobile-options">
                        <i class="feather icon-more-horizontal"></i>
                    </a>
                </div>

                <div class="navbar-container container-fluid">
                    <ul class="nav-left">
                        <li class="header-search">
                            <div class="main-search morphsearch-search">
                                <div class="input-group">
                                    <span class="input-group-addon search-close"><i class="feather icon-x"></i></span>
                                    <input type="text" class="form-control">
                                    <span class="input-group-addon search-btn"><i class="feather icon-search"></i></span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <a href="#!" onclick="javascript:toggleFullScreen()">
                                <i class="feather icon-maximize full-screen"></i>
                            </a>
                        </li>
                    </ul>
                    <ul class="nav-right">
                        <li class="header-notification">
                            <div class="dropdown-primary dropdown">
                                <div class="dropdown-toggle" data-toggle="dropdown">
                                    <i class="feather icon-bell"></i>
                                    <span class="badge bg-c-pink">5</span>
                                </div>
                                <ul class="show-notification notification-view dropdown-menu" data-dropdown-in="fadeIn" data-dropdown-out="fadeOut">
                                    <li>
                                        <h6>Notifications</h6>
                                        <label class="label label-danger">New</label>
                                    </li>
                                    <li>
                                        <div class="media">
                                            <img class="d-flex align-self-center img-radius" src="..\files\assets\images\avatar-4.jpg" alt="Generic placeholder image">
                                            <div class="media-body">
                                                <h5 class="notification-user">John Doe</h5>
                                                <p class="notification-msg">Lorem ipsum dolor sit amet, consectetuer elit.</p>
                                                <span class="notification-time">30 minutes ago</span>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="media">
                                            <img class="d-flex align-self-center img-radius" src="..\files\assets\images\avatar-3.jpg" alt="Generic placeholder image">
                                            <div class="media-body">
                                                <h5 class="notification-user">Joseph William</h5>
                                                <p class="notification-msg">Lorem ipsum dolor sit amet, consectetuer elit.</p>
                                                <span class="notification-time">30 minutes ago</span>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="media">
                                            <img class="d-flex align-self-center img-radius" src="..\files\assets\images\avatar-4.jpg" alt="Generic placeholder image">
                                            <div class="media-body">
                                                <h5 class="notification-user">Sara Soudein</h5>
                                                <p class="notification-msg">Lorem ipsum dolor sit amet, consectetuer elit.</p>
                                                <span class="notification-time">30 minutes ago</span>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="header-notification">
                            <div class="dropdown-primary dropdown">
                                <div class="displayChatbox dropdown-toggle" data-toggle="dropdown">
                                    <i class="feather icon-message-square"></i>
                                    <span class="badge bg-c-green">3</span>
                                </div>
                            </div>
                        </li>
                        <li class="user-profile header-notification">
                            <div class="dropdown-primary dropdown">
                                <div class="dropdown-toggle" data-toggle="dropdown">
                                    <img src="..\files\assets\images\avatar-4.jpg" class="img-radius" alt="User-Profile-Image">
                                    <span>John Doe</span>
                                    <i class="feather icon-chevron-down"></i>
                                </div>
                                <ul class="show-notification profile-notification dropdown-menu" data-dropdown-in="fadeIn" data-dropdown-out="fadeOut">
                                    <li>
                                        <a href="#!">
                                            <i class="feather icon-settings"></i> Settings
                                        </a>
                                    </li>
                                    <li>
                                        <a href="user-profile.htm">
                                            <i class="feather icon-user"></i> Profile
                                        </a>
                                    </li>
                                    <li>
                                        <a href="email-inbox.htm">
                                            <i class="feather icon-mail"></i> My Messages
                                        </a>
                                    </li>
                                    <li>
                                        <a href="auth-lock-screen.htm">
                                            <i class="feather icon-lock"></i> Lock Screen
                                        </a>
                                    </li>
                                    <li>
                                        <a href="auth-normal-sign-in.htm">
                                            <i class="feather icon-log-out"></i> Logout
                                        </a>
                                    </li>
                                </ul>

                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Sidebar chat start -->
        <div id="sidebar" class="users p-chat-user showChat">
            <div class="had-container">
                <div class="card card_main p-fixed users-main">
                    <div class="user-box">
                        <div class="chat-inner-header">
                            <div class="back_chatBox">
                                <div class="right-icon-control">
                                    <input type="text" class="form-control  search-text" placeholder="Search Friend" id="search-friends">
                                    <div class="form-icon">
                                        <i class="icofont icofont-search"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="main-friend-list">
                            <div class="media userlist-box" data-id="1" data-status="online" data-username="Josephin Doe" data-toggle="tooltip" data-placement="left" title="Josephin Doe">
                                <a class="media-left" href="#!">
                                    <img class="media-object img-radius img-radius" src="..\files\assets\images\avatar-3.jpg" alt="Generic placeholder image ">
                                    <div class="live-status bg-success"></div>
                                </a>
                                <div class="media-body">
                                    <div class="f-13 chat-header">Josephin Doe</div>
                                </div>
                            </div>
                            <div class="media userlist-box" data-id="2" data-status="online" data-username="Lary Doe" data-toggle="tooltip" data-placement="left" title="Lary Doe">
                                <a class="media-left" href="#!">
                                    <img class="media-object img-radius" src="..\files\assets\images\avatar-2.jpg" alt="Generic placeholder image">
                                    <div class="live-status bg-success"></div>
                                </a>
                                <div class="media-body">
                                    <div class="f-13 chat-header">Lary Doe</div>
                                </div>
                            </div>
                            <div class="media userlist-box" data-id="3" data-status="online" data-username="Alice" data-toggle="tooltip" data-placement="left" title="Alice">
                                <a class="media-left" href="#!">
                                    <img class="media-object img-radius" src="..\files\assets\images\avatar-4.jpg" alt="Generic placeholder image">
                                    <div class="live-status bg-success"></div>
                                </a>
                                <div class="media-body">
                                    <div class="f-13 chat-header">Alice</div>
                                </div>
                            </div>
                            <div class="media userlist-box" data-id="4" data-status="online" data-username="Alia" data-toggle="tooltip" data-placement="left" title="Alia">
                                <a class="media-left" href="#!">
                                    <img class="media-object img-radius" src="..\files\assets\images\avatar-3.jpg" alt="Generic placeholder image">
                                    <div class="live-status bg-success"></div>
                                </a>
                                <div class="media-body">
                                    <div class="f-13 chat-header">Alia</div>
                                </div>
                            </div>
                            <div class="media userlist-box" data-id="5" data-status="online" data-username="Suzen" data-toggle="tooltip" data-placement="left" title="Suzen">
                                <a class="media-left" href="#!">
                                    <img class="media-object img-radius" src="..\files\assets\images\avatar-2.jpg" alt="Generic placeholder image">
                                    <div class="live-status bg-success"></div>
                                </a>
                                <div class="media-body">
                                    <div class="f-13 chat-header">Suzen</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Sidebar inner chat start-->
        <div class="showChat_inner">
            <div class="media chat-inner-header">
                <a class="back_chatBox">
                    <i class="feather icon-chevron-left"></i> Josephin Doe
                </a>
            </div>
            <div class="media chat-messages">
                <a class="media-left photo-table" href="#!">
                    <img class="media-object img-radius img-radius m-t-5" src="..\files\assets\images\avatar-3.jpg" alt="Generic placeholder image">
                </a>
                <div class="media-body chat-menu-content">
                    <div class="">
                        <p class="chat-cont">I'm just looking around. Will you tell me something about yourself?</p>
                        <p class="chat-time">8:20 a.m.</p>
                    </div>
                </div>
            </div>
            <div class="media chat-messages">
                <div class="media-body chat-menu-reply">
                    <div class="">
                        <p class="chat-cont">I'm just looking around. Will you tell me something about yourself?</p>
                        <p class="chat-time">8:20 a.m.</p>
                    </div>
                </div>
                <div class="media-right photo-table">
                    <a href="#!">
                        <img class="media-object img-radius img-radius m-t-5" src="..\files\assets\images\avatar-4.jpg" alt="Generic placeholder image">
                    </a>
                </div>
            </div>
            <div class="chat-reply-box p-b-20">
                <div class="right-icon-control">
                    <input type="text" class="form-control search-text" placeholder="Share Your Thoughts">
                    <div class="form-icon">
                        <i class="feather icon-navigation"></i>
                    </div>
                </div>
            </div>
        </div>
        <!-- Sidebar inner chat end-->
        <div class="pcoded-main-container">
            <div class="pcoded-wrapper">
                <nav class="pcoded-navbar">
                    <div class="pcoded-inner-navbar main-menu">
                      <!-- Additions -->
                      <div class="pcoded-navigatio-lavel">Dashboard</div>
                      <ul class="pcoded-item pcoded-left-item">
                          <li class="pcoded-hasmenu">
                              <a href="javascript:void(0)">
                                  <span class="pcoded-micon"><i class="feather icon-activity"></i></span>
                                  <span class="pcoded-mtext">Analytics</span>
                              </a>
                              <ul class="pcoded-submenu">
                                  <li>
                                      <a href="artworks.htm">
                                          <span class="pcoded-mtext">Artworks</span>
                                      </a>
                                  </li>
                                  <li>
                                      <a href="general.htm">
                                          <span class="pcoded-mtext">General</span>
                                      </a>
                                  </li>
                                  <li>
                                      <a href="rooms.htm">
                                          <span class="pcoded-mtext">Rooms</span>
                                      </a>
                                  </li>
                                  <li>
                                      <a href="features.htm">
                                          <span class="pcoded-mtext">Features</span>
                                      </a>
                                  </li>
                              </ul>
                          </li>
                          <li class="pcoded-hasmenu active pcoded-trigger">
                              <a href="javascript:void(0)">
                                  <span class="pcoded-micon"><i class="feather icon-sliders"></i></span>
                                  <span class="pcoded-mtext">Manage artworks</span>
                              </a>
                              <ul class="pcoded-submenu">
                                  <li>
                                      <a href="manage_artworks_add.htm">
                                          <span class="pcoded-mtext">Add</span>
                                      </a>
                                  </li>
                                  <li class="active">
                                      <a href="">
                                          <span class="pcoded-mtext">Edit</span>
                                      </a>
                                  </li>
                              </ul>
                          </li>
                        </ul>
                    </div>
                </nav>

                <!-- Page content start -->
                <div class="pcoded-content">
                    <div class="pcoded-inner-content">
                        <!-- Main-body start -->
                        <div class="main-body">
                            <div class="page-wrapper">

                                <!-- Page-header start -->
                                <!--<div id="pageHeader" class="page-header hide">
                                    <div class="row align-items-end">
                                        <div class="col-lg-8">
                                            <div class="page-header-title">
                                                <div class="d-inline">
                                                    <h4 id="pageHeaderTitle">Discobolus</h4>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="page-header-breadcrumb">
                                                <ul class="breadcrumb-title">
                                                    <li class="breadcrumb-item">
                                                        <a href="index.htm"> <i class="feather icon-home"></i></a>
                                                    </li>
                                                    <li class="breadcrumb-item"><a href="manage_artworks_edit.htm">Search</a>
                                                    </li>
                                                    <li class="breadcrumb-item"><a id="searchName" href="">Discobolus</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>-->
                                <!-- Page-header end -->

                                <div class="page-body">
                                        <div class="row">
                                            <div class="col-sm-12">

                                                <!-- Search engine card start -->
                                                <div class="card">
                                                    <div class="card-block">
                                                        <div class="row">
                                                            <div class="col-lg-6 offset-lg-3">
                                                              <h4 class="text-center"><b>Artwork Search Engine</b></h4>
                                                              <p class="txt-highlight text-center m-t-20"> Search the artwork you want to modify by typing its title</p>
                                                            </div>
                                                        </div>
                                                        <div class="row search-header">
                                                            <div class="col-lg-4 offset-lg-4 offset-sm-3 col-sm-6 offset-sm-1 col-xs-12">
                                                                <div class="input-group input-group-button input-group-primary">
                                                                    <input id="searchText" type="text" class="form-control" placeholder="Search here...">
                                                                    <button id="searchButton" class="btn btn-primary input-group-addon">Search</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Search engine card end -->

                                                <h4 id="searchResultTitle" class="m-b-20 hide"><b></b> Results Found</h4>

                                                <!-- Search result card -->
                                                <div id="searchResultCards" class="row search-result"></div>

                                                <style>
                                                .fake-input-disabled {
                                                  background: #E9ECEF;
                                                  opacity: 0.5;
                                                  cursor: not-allowed;
                                                }
                                              </style>

                                                <!-- Non-editable artwork -->
                                                <div id="nonEditArt" class="row hide">
                                                  <div class="col-sm-12">
                                                    <!-- Basic Form Inputs card start -->
                                                    <div class="card">
                                                      <div class="card-header">
                                                        <div class="card-header-right m-r-20">
                                                          <ul class="list-unstyled card-option">
                                                              <li><i id="btnCloseNonEdit" class="feather icon-x"></i></li>
                                                          </ul>
                                                        </div>
                                                      </div>
                                                      <div class="card-block">
                                                            <h5 class="sub-title"><span id="subTitleNonEdit"></span> &emsp;
                                                              <i class="feather icon-edit form-txt-info pointer" data-toggle="modal" data-target="#editModal"></i>
                                                            </h5>
                                                          <form>
                                                              <div class="form-group row">
                                                                  <label class="col-sm-2 col-form-label">Title</label>
                                                                  <div class="col-sm-10">
                                                                      <input id="titleNonEdit" type="text" class="form-control" value="Discobolus" disabled>
                                                                  </div>
                                                              </div>
                                                              <div class="form-group row">
                                                                  <label class="col-sm-2 col-form-label">Author</label>
                                                                  <div class="col-sm-10">
                                                                      <input id="authorNonEdit" type="text" class="form-control" value="Unknown" disabled>
                                                                  </div>
                                                              </div>
                                                              <div class="form-group row">
                                                                  <label class="col-sm-2 col-form-label">Description</label>
                                                                  <div class="col-sm-10">
                                                                      <textarea id="descriptionNonEdit" rows="5" cols="5" class="form-control" disabled></textarea>
                                                                  </div>
                                                              </div>
                                                              <div class="form-group row">
                                                                  <label class="col-sm-2 col-form-label">Room</label>
                                                                  <div class="col-sm-10">
                                                                      <select id="roomNonEdit" class="form-control" disabled>
                                                                          <option value="0">None</option>
                                                                          <option value="1">1</option>
                                                                          <option value="2">2</option>
                                                                          <option value="3">3</option>
                                                                          <option value="4">4</option>
                                                                          <option value="5">5</option>
                                                                          <option value="6">6</option>
                                                                          <option value="7">7</option>
                                                                          <option value="8">8</option>
                                                                          <option value="9">9</option>
                                                                          <option value="10">10</option>
                                                                          <option value="11">11</option>
                                                                      </select>
                                                                  </div>
                                                              </div>
                                                              <div class="form-group row">
                                                                  <label class="col-sm-2 col-form-label">Upload 3D model</label>
                                                                  <div class="col-sm-10">
                                                                      <input id="modelNonEdit" type="file" class="form-control"  multiple disabled hidden>
                                                                      <label for="modelNonEdit" class="form-control fake-input-disabled">
                                                                        <button disabled>Scegli file</button>
                                                                        <span id="modelNonEditText"></span>
                                                                      </label>
                                                                  </div>
                                                              </div>
                                                              <div class="form-group row">
                                                                  <label class="col-sm-2 col-form-label">Upload photo</label>
                                                                  <div class="col-sm-10">
                                                                      <input id="photoNonEdit" type="file" class="form-control"  disabled hidden>
                                                                      <label for="photoNonEdit" class="form-control fake-input-disabled">
                                                                        <button disabled>Scegli file</button>
                                                                        <span id="photoNonEditText"></span>
                                                                      </label>
                                                                  </div>
                                                              </div>
                                                          </form>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                                <!-- /Non-editable artwork -->

                                                <!-- When click on edit icon, a modal will appear which will require to insert the user password to edit -->
                                                <!-- Editable artwork -->
                                                <div id="editArt" class="row hide">
                                                  <div class="col-sm-12">
                                                    <!-- Basic Form Inputs card start -->
                                                    <div class="card">
                                                      <div class="card-header">
                                                        <div class="card-header-right m-r-20">
                                                          <ul class="list-unstyled card-option">
                                                              <li><i class="feather icon-maximize full-card"></i></li>
                                                              <li><i id="btnCloseEdit" class="feather icon-x"></i></li>
                                                          </ul>
                                                        </div>
                                                      </div>
                                                      <div class="card-block">
                                                          <h5 id="subTitle" class="sub-title"></h5>
                                                          <form>
                                                              <div class="form-group row">
                                                                  <label class="col-sm-2 col-form-label">Title</label>
                                                                  <div class="col-sm-10">
                                                                    <input type="text" class="form-control" value="Discobolus" maxlength="127" id="title" name="title">
                                                                    <p id="titleError"></p>
                                                                  </div>
                                                              </div>
                                                              <div class="form-group row">
                                                                  <label class="col-sm-2 col-form-label">Author</label>
                                                                  <div class="col-sm-10">
                                                                    <input type="text" class="form-control" value="Unknown" maxlength="127" id="author" name="author">
                                                                    <p id="authorError"></p>
                                                                  </div>
                                                              </div>
                                                              <div class="form-group row">
                                                                  <label class="col-sm-2 col-form-label">Description</label>
                                                                  <div class="col-sm-10">
                                                                    <textarea rows="3" class="form-control max-textarea"  maxlength="255" id="description" name="description"></textarea>
                                                                    <p id="descriptionError"></p>
                                                                  </div>
                                                              </div>
                                                              <div class="form-group row">
                                                                  <label class="col-sm-2 col-form-label">Room</label>
                                                                  <div class="col-sm-10">
                                                                    <select name="select" class="form-control" id="room" name="room">
                                                                        <option disabled value="0">-- Please choose a room --</option>
                                                                        <option selected value="1">1</option>
                                                                        <option value="2">2</option>
                                                                        <option value="3">3</option>
                                                                        <option value="4">4</option>
                                                                        <option value="5">5</option>
                                                                        <option value="6">6</option>
                                                                        <option value="7">7</option>
                                                                        <option value="8">8</option>
                                                                        <option value="9">9</option>
                                                                        <option value="10">10</option>
                                                                    </select>
                                                                    <p id="roomError"></p>
                                                                  </div>
                                                              </div>
                                                              <div class="form-group row">
                                                                  <label class="col-sm-2 col-form-label">Upload 3D model</label>
                                                                  <div class="col-sm-10">
                                                                    <input type="file" class="form-control" id="model" name="model" multiple hidden>
                                                                    <label for="model" class="form-control">
                                                                      <button id="modelFakeBtn">Scegli file</button>
                                                                      <span id="modelEditText"></span>
                                                                    </label>
                                                                    <p id="modelError"></p>
                                                                  </div>
                                                              </div>
                                                              <div class="form-group row">
                                                                  <label class="col-sm-2 col-form-label">Upload photo</label>
                                                                  <div class="col-sm-10">
                                                                    <input type="file" class="form-control" id="photo" name="photo" hidden>
                                                                    <label for="photo" class="form-control">
                                                                      <button id="photoFakeBtn">Scegli file</button>
                                                                      <span id="photoEditText"></span>
                                                                    </label>
                                                                    <p id="photoError"></p>
                                                                  </div>
                                                              </div>
                                                              <div class="form-group row">
                                                                <div class="col-sm-10">
                                                                    <button id="btnDelete" type="button" class="btn btn-danger">Delete artwork</button>
                                                                    &emsp;

                                                                    <button id="btnSubmit" type="button" class="btn btn-info">Submit</button>
                                                                </div>
                                                              </div>
                                                          </form>
                                                      </div>
                                                  </div>
                                                </div>
                                              </div>
                                              <!-- /Editable artwork -->

                                              <!-- Edit modal-->
                                              <div id="editModal" class="modal fade" role="dialog">
                                                  <div class="modal-dialog">
                                                      <div class="login-card card-block login-card-modal">
                                                          <form class="md-float-material">
                                                              <!--<div class="text-center">
                                                                  <img src="..\files\assets\images\auth\logo.png" alt="logo.png">
                                                              </div>-->
                                                              <div class="card m-t-15">
                                                              <div class="auth-box card-block">
                                                                  <div class="row m-b-20">
                                                                      <div class="col-md-12">
                                                                          <h3 class="text-center txt-primary">Insert your password to continue</h3>
                                                                      </div>
                                                                  </div>
                                                                  <hr>
                                                                  <div class="input-group">
                                                                      <input id="passModal" type="password" class="form-control" placeholder="Password" maxlength="127">
                                                                      <span class="md-line"></span>
                                                                  </div>
                                                                  <p id="passwordError"></p>
                                                                  <div class="input-group">
                                                                      <input id="confirmPassModal" type="password" class="form-control" placeholder="Confirm Password" maxlength="127">
                                                                      <span class="md-line"></span>
                                                                  </div>
                                                                  <p id="passwordMatchError"></p>
                                                                  <div class="modal-footer">
                                                                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                                          <button id="btnContinue" type="button" class="btn btn-primary">Continue</button>
                                                                  </div>
                                                              </div>
                                                              </div>
                                                          </form>
                                                          <!-- end of form -->
                                                      </div>
                                                  </div>
                                              </div>
                                              <!-- /Edit modal-->

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Customizable Settings -->
                            <!--<div id="styleSelector">

                            </div>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Warning Section Starts -->
    <!-- Older IE warning message -->
    <!--[if lt IE 10]>
<div class="ie-warning">
    <h1>Warning!!</h1>
    <p>You are using an outdated version of Internet Explorer, please upgrade <br/>to any of the following web browsers to access this website.</p>
    <div class="iew-container">
        <ul class="iew-download">
            <li>
                <a href="http://www.google.com/chrome/">
                    <img src="../files/assets/images/browser/chrome.png" alt="Chrome">
                    <div>Chrome</div>
                </a>
            </li>
            <li>
                <a href="https://www.mozilla.org/en-US/firefox/new/">
                    <img src="../files/assets/images/browser/firefox.png" alt="Firefox">
                    <div>Firefox</div>
                </a>
            </li>
            <li>
                <a href="http://www.opera.com">
                    <img src="../files/assets/images/browser/opera.png" alt="Opera">
                    <div>Opera</div>
                </a>
            </li>
            <li>
                <a href="https://www.apple.com/safari/">
                    <img src="../files/assets/images/browser/safari.png" alt="Safari">
                    <div>Safari</div>
                </a>
            </li>
            <li>
                <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie">
                    <img src="../files/assets/images/browser/ie.png" alt="">
                    <div>IE (9 & above)</div>
                </a>
            </li>
        </ul>
    </div>
    <p>Sorry for the inconvenience!</p>
</div>
<![endif]-->
    <!-- Warning Section Ends -->
    <!-- Required Jquery -->
    <script type="text/javascript" src="..\files\bower_components\jquery\js\jquery.min.js"></script>
    <script type="text/javascript" src="..\files\bower_components\jquery-ui\js\jquery-ui.min.js"></script>
    <script type="text/javascript" src="..\files\bower_components\popper.js\js\popper.min.js"></script>
    <script type="text/javascript" src="..\files\bower_components\bootstrap\js\bootstrap.min.js"></script>
    <!-- jquery slimscroll js -->
    <script type="text/javascript" src="..\files\bower_components\jquery-slimscroll\js\jquery.slimscroll.js"></script>
    <!-- modernizr js -->
    <script type="text/javascript" src="..\files\bower_components\modernizr\js\modernizr.js"></script>
    <script type="text/javascript" src="..\files\bower_components\modernizr\js\css-scrollbars.js"></script>
    <!-- Max-length js -->
    <script type="text/javascript" src="..\files\bower_components\bootstrap-maxlength\js\bootstrap-maxlength.js"></script>
    <!-- Sweet alert js -->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <!-- AWS SDK -->
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.7.16.min.js"></script>

    <!-- i18next.min.js -->
    <script type="text/javascript" src="..\files\bower_components\i18next\js\i18next.min.js"></script>
    <script type="text/javascript" src="..\files\bower_components\i18next-xhr-backend\js\i18nextXHRBackend.min.js"></script>
    <script type="text/javascript" src="..\files\bower_components\i18next-browser-languagedetector\js\i18nextBrowserLanguageDetector.min.js"></script>
    <script type="text/javascript" src="..\files\bower_components\jquery-i18next\js\jquery-i18next.min.js"></script>

    <!-- Custom js -->
    <script type="text/javascript" src="../files/assets/js/artworkValidation.js"></script>
    <script type="text/javascript" src="../files/assets/js/maxLengthTag.js"></script>
    <script type="text/javascript" src="../files/assets/js/utils.js"></script>

    <script type="text/javascript">
      window.onload = function() {
        // Initialize the Amazon Cognito credentials provider
        AWS.config.region = 'us-east-1';
        AWS.config.credentials = new AWS.CognitoIdentityCredentials({
            IdentityPoolId: 'us-east-1:33cfdc7c-d841-41cb-b3b4-af3b015348da',
        });

        // Set up connection with DynamoDB
        const dynamodb  = new AWS.DynamoDB();
        const docClient = new AWS.DynamoDB.DocumentClient();

        // Get modal inputs
        const password       = document.getElementById("passModal");
        const repeatPassword = document.getElementById("confirmPassModal");
        let repeated = false;

        const subTitleNonEdit    = document.getElementById("subTitleNonEdit");
        // Get form input elements non editable card
        const titleNonEdit       = document.getElementById("titleNonEdit");
        const authorNonEdit      = document.getElementById("authorNonEdit");
        const descriptionNonEdit = document.getElementById("descriptionNonEdit");
        const roomNonEdit        = document.getElementById("roomNonEdit");
        const modelNonEdit       = document.getElementById("modelNonEdit");
        const photoNonEdit       = document.getElementById("photoNonEdit");
        const modelNonEditText   = document.getElementById("modelNonEditText");
        const photoNonEditText   = document.getElementById("photoNonEditText");

        const subTitle    = document.getElementById("subTitle");
        // Get form input elements editable card
        const title       = document.getElementById("title");
        const author      = document.getElementById("author");
        const description = document.getElementById("description");
        const room        = document.getElementById("room");
        const model       = document.getElementById("model");
        const photo       = document.getElementById("photo");
        const modelEditText = document.getElementById("modelEditText");
        const photoEditText = document.getElementById("photoEditText");

        const searchTextJQ        = $("#searchText");
        const searchResultTitleJQ = $("#searchResultTitle");
        const searchResultCardsJQ = $("#searchResultCards");
        const nonEditArtJQ        = $("#nonEditArt");
        const editArtJQ           = $("#editArt");

        // Prepare inputs values
        let titleValue       = "",
            authorValue      = "",
            descriptionValue = "",
            roomValue        = "",
            modelValue       = null,
            photoValue       = null;

        // Set modal input elements listeners
        password.addEventListener("input", function(e) {
          password.value !== "" ? showSuccess(password, passwordError) :
                                  showError(password, passwordError, "Password cannot be blank");

          if (!repeated)  return;

          matchPasswords(password, repeatPassword) ? showSuccess(repeatPassword, passwordMatchError) :
                                                     showError(repeatPassword, passwordMatchError, "Passwords do not match");
        });

        repeatPassword.addEventListener("input", function(e) {
          if (!repeated)
            repeated = true;

          matchPasswords(password, repeatPassword) ? showSuccess(repeatPassword, passwordMatchError) :
                                                     showError(repeatPassword, passwordMatchError, "Passwords do not match");
        });

        // Set form input elements listeners
        title.addEventListener("input", function(e) {
          validateTitle(title, titleError);
        });

        author.addEventListener("input", function(e) {
          validateAuthor(author, authorError);
        });

        description.addEventListener("input", function(e) {
          validateDescription(description, descriptionError);
        });

        room.addEventListener("input", function(e) {
          validateRoom(room, roomError);
        });

        model.addEventListener("input", function(e) {
          setFakeInputFileValue(modelEditText, model.files, true, "\\")
          const err = validate3Dmodel(model, modelError);

          if (err) {
            modelEditText.style.color = "#eb3422";
            modelEditText.parentNode.style.borderColor = "#eb3422";
          }
          else {
            modelEditText.style.color = "#495057";
            modelEditText.parentNode.style.borderColor = "#ccc";
          }
        });

        photo.addEventListener("input", function(e) {
          setFakeInputFileValue(photoEditText, photo.value, false, "\\")
          const err = validatePhoto(photo, photoError);

          if (err) {
            photoEditText.style.color = "#eb3422";
            photoEditText.parentNode.style.borderColor = "#eb3422";
          }
          else {
            photoEditText.style.color = "#495057";
            photoEditText.parentNode.style.borderColor = "#ccc";
          }
        });

        // Trigger the input file
        document.getElementById("modelFakeBtn").onclick = function(event) {
           event.preventDefault();
           model.click();
        }

        // Trigger the input file
        document.getElementById("photoFakeBtn").onclick = function(event) {
           event.preventDefault();
           photo.click();
        }

        // Execute the search when the user press the associated button
        document.getElementById("searchButton").onclick = function () {
          search();
        }

        // Execute the search also when the user press enter on the keyboard
        document.getElementById("searchText").addEventListener("keyup", function(event) {
          if (event.keyCode === 13) {
            // Cancel the default action, if needed
            event.preventDefault();
            search();
          }
        });

        function setFakeInputFileValue(elem, value, multiple=false, sep="/") {
          if(!elem) return;

          /*console.log("======= setFakeInputFileValue =======");
          console.log("value: " + value);
          console.log("model.files: " + model.files);
          console.log("photo.files: " + photo.files);
          console.log("model.files.length: " + model.files.length);
          console.log("model.files.length: " + photo.files.length);

          if (model.files.length > 0)
            console.log("model.files[0].name: " + model.files[0].name);
          if (photo.files.length > 0)
            console.log("photo.files[0].name: " + photo.files[0].name);

          console.log("=====================================");*/

          // Check if multiple input value
          if(multiple) {
            const n = value.length;

            if (n == 0)
              elem.innerHTML = "Nessun file selezionato";

            else if (n == 1) {
              str = "";
              v = value[0];

              /*console.log("value[0]: " + value[0]);
              console.log("value[0] instanceof String? " + (value[0] instanceof String));
              console.log("typeof value[0] === 'string'? " + (typeof value[0] === "string"));*/

              // Check if value[0] is directly a string (i.e. just retrieved URL from server)
              if (typeof v === "string" || v instanceof String)
                str = v;
              // Else user has selected a file, so access the name
              else
                str = v[0].name;

              const s = str.split(sep);
      	      elem.innerHTML = s[s.length-1];
            }

            else
    	       elem.innerHTML = n + " file";
          }
          // Else (no multiple input value)
          else {
            const s = value.split(sep);
            //console.log("s: " + s + "\ts.length: " + s.length);
            if (s.length == 1)
              elem.innerHTML = "Nessun file selezionato";
            else
    	        elem.innerHTML = s[s.length-1];
          }
        }

        // Store artworks returned by the query as a map
        let artworks = new Map();
        // Store artwork to set the values of the forms
        let artwork = null;

        // Execute and show results of the search
        async function search() {
          let input = searchTextJQ.val();
          searchResultTitleJQ.fadeOut();
          searchResultCardsJQ.fadeOut();
          nonEditArtJQ.fadeOut();
          editArtJQ.fadeOut();

          // Remove previous results cards
          searchResultCardsJQ.html("");
          artworks.clear();

          // Wait results of the search
          const artworksNumber = await searchArtwork(input);
          //console.log("after searchArtwork");

          if(artworksNumber == 0) {
            setTimeout(function() {
              alert("No result found");
            }, 200);
            return;
          }

          //$("#pageHeaderTitle").text(input);
          //$("#searchName").text(input);

          // Set the number of results found
          let s = "<b>" + artworksNumber + "</b>";
          s += artworksNumber > 1 ? " Results found" : " Result found";
          searchResultTitleJQ.html(s);

          //$("#pageHeader").fadeIn();
          searchResultTitleJQ.fadeIn();
          searchResultCardsJQ.fadeIn();
        }

        // Search if the artwork title is in the DB
        async function searchArtwork(input) {
          const filteredInput = input.toLowerCase();

          return new Promise( async function(resolve) {
            // Await the query to the DB and then return the promise
            await queryData(filteredInput);
            //console.log("End searchArtwork");
            resolve(artworks.size);
          });
        }

        async function queryData(input) {
          const params = {
            TableName : "ARte_Artworks",
            FilterExpression: "begins_with(#k, :i)",
            ExpressionAttributeNames: {
                "#k": "keyword",
            },
            ExpressionAttributeValues: {
                ":i": input
            }
          };

          // Await a scan
          return new Promise( function(resolve) {
            docClient.scan(params, onScan);

            function onScan(err, data) {
              if (err)
                showErrorModal("An error occurred!");
              else {
                //console.log(data);

                data.Items.forEach(function(artwork) {
                  artworks.set(artwork.artworkID, artwork);
                });

                // Continue scanning if we have more artworks (per scan 1MB limitation)
                if (data.LastEvaluatedKey) {
                  params.ExclusiveStartKey = data.LastEvaluatedKey;
                  docClient.scan(params, onScan);
                }

                createCards();
              }

              //console.log("End scan");
              resolve(artworks);
            }
          });
        }

        // Create artworks cards to display the search results
        function createCards() {
          current = getDatetime();

          for (let artwork of artworks.values()) {
            ms = difference(current, artwork.datetime);
            //console.log("ms: " + ms + " => " + elapsedTime(ms));

            // ORIGINALE
            /*searchResultCardsJQ.append("<div class='col-lg-3 col-md-4 col-sm-6'><div class='card'><div id='" + artwork.artworkID + "' class='pointer zoomable-card'><div class='card-img-wrap'><img class='card-img-top img-fluid' src='" + artwork.photo + "' alt='Artwork image'></div><div class='card-block'><h5 class='card-title'>" + artwork.title + "</h5><p class='card-text text-muted text-ellipsis'>" + artwork.description + "</p><p class='card-text'><small class='text-muted'>Last update " + elapsedTime(ms) + " ago</small></p></div></div></div></div>");*/

            // IMG FISSA
            searchResultCardsJQ.append("<div class='col-lg-3 col-md-4 col-sm-6'><div class='card'><div id='" + artwork.artworkID + "' class='pointer zoomable-card'><div class='card-img-wrap'><img class='card-img-top' src='" + artwork.photo + "' alt='Artwork image' width='350' height='350'></div><div class='card-block'><h5 class='card-title'>" + artwork.title + "</h5><p class='card-text text-muted text-ellipsis'>" + artwork.description + "</p><p class='card-text'><small class='text-muted'>Last update " + elapsedTime(ms) + " ago</small></p></div></div></div></div>");
          }

          // When a card is clicked, open the non-editable card
          $(".zoomable-card").click(function () {
            openNonEditCard($(this).attr("id"));
          });

          /* Structure of each card
          <div class='col-lg-3 col-md-4 col-sm-6'>
              <div class='card'>
                  <div id='DiscobolusCard' class='pointer zoomable-card'>
                    <div class='card-img-wrap'>
                      <img class='card-img-top img-fluid' src='..\files\assets\images\search-images\Discobolus.jpg' alt='Artwork image'>
                    </div>
                    <div class='card-block'>
                      <h5 class='card-title'>Discobolus</h5>
                      <p class='card-text text-muted'>The Discobolus of Myron is a Greek sculpture completed at the start of the Classical Period...</p>
                      <p class='card-text'><small class='text-muted'>Last update 3 mins ago</small></p>
                    </div>
                  </div>
              </div>
          </div>*/
        }

        // Open the non-editable card
        function openNonEditCard(artworkID) {
          searchResultTitleJQ.fadeOut();
          searchResultCardsJQ.fadeOut();

          // Get artwork from artworks
          artwork = artworks.get(artworkID);

          // Set the values of the card
          subTitleNonEdit.innerHTML = artwork.title;
          titleNonEdit.value       = artwork.title;
          authorNonEdit.value      = artwork.author;
          descriptionNonEdit.value = artwork.description;
          roomNonEdit.value        = artwork.room;

          // Simulate assignment to file inputs
          setFakeInputFileValue(modelNonEditText, artwork.model3D, true)
          setFakeInputFileValue(photoNonEditText, artwork.photo)

          nonEditArtJQ.fadeIn();
        }

        // When the close button of the non-editable card is clicked, close it
        document.getElementById("btnCloseNonEdit").onclick = function () {
          nonEditArtJQ.fadeOut()
          searchResultTitleJQ.fadeIn();
          searchResultCardsJQ.fadeIn();

          // Unset the artwork
          artwork = null;
        }

        // When the close button of the editable card is clicked, close it
        document.getElementById("btnCloseEdit").onclick = function () {
          closeEditCard();
        }

        // Close the editable card
        function closeEditCard() {
          editArtJQ.fadeOut()
          searchResultTitleJQ.fadeIn();
          searchResultCardsJQ.fadeIn();

          // Unset the artwork
          artwork = null;
        }

        // When the continue button in the modal is clicked, check password and display the editable card
        document.getElementById("btnContinue").onclick = function () {
          if(!checkPassword())
            return;

          // Set the values of the card
          subTitle.innerHTML = artwork.title;
          title.value       = artwork.title;
          author.value      = artwork.author;
          description.value = artwork.description;
          room.value        = artwork.room;

          // Simulate assignment to file inputs
          setFakeInputFileValue(modelEditText, artwork.model3D, true)
          setFakeInputFileValue(photoEditText, artwork.photo)

          this.setAttribute("data-dismiss", "modal");
          document.getElementById('nonEditArt').style.display = "none";
          document.getElementById('editArt').style.display    = "inherit";
        }

        // Check passwords in the modal to unlock the editable card
        function checkPassword() {
          let err = password.value !== "" ? showSuccess(password, passwordError) :
                                            showError(password, passwordError, "Password cannot be blank");

          err += matchPasswords(password, repeatPassword) ? showSuccess(repeatPassword, passwordMatchError) :
                                                            showError(repeatPassword, passwordMatchError, "Passwords do not match");
          if (err > 0)  return false;

          // TODO check password with the one of the user
          return true;
        }

        // When the Submit button is clicked, validate the form and send update if ok
        document.getElementById("btnSubmit").onclick = function () {
          // Validate the form against the constraints
          const err = validate();
          //console.log("err: " + err);

          if (err == 0)
            submit();
        }

        // Validate the form and return the errors
        function validate() {
          let err = validateTitle(title, titleError);
          err += validateAuthor(author, authorError);
          err += validateDescription(description, descriptionError);
          err += validateRoom(room, roomError);
          err += model.files.length > 0 ? validate3Dmodel(model, modelError) : 0;
          err += photo.files.length > 0 ? validatePhoto(photo, photoError)   : 0;
          return err;
        }

        function submit() {
          // Get input values
          titleValue       = title.value;
          authorValue      = author.value;
          descriptionValue = description.value;
          roomValue        = room.value;
          modelValue       = artwork.model3D;
          photoValue       = artwork.photo;

          const formData = new FormData();
          let updated = false;

          // Check if the model has been changed
          if (model.files.length > 0) {
            updated = true;
            modelValue = model.files;

            for (let file of modelValue)
              formData.append("model3D[]", file);
          }

          // Check if the photo has been changed
          if (photo.files.length > 0) {
            updated = true;
            photoValue = photo.files[0];

            // TODO
            //photoValue = resizeImage(document, photoValue);

            formData.append("photo", photoValue);
          }

          // Check if at least one of the two types of file has been changed
          if (updated) {
            formData.append("title", titleValue);
            formData.append("update", true);

            // Upload 3D model and photo
            $.ajax({
              url: "../files/assets/php/uploadArtwork.php", // point to server-side PHP script
              dataType: "text",  // what to expect back from the PHP script, if anything
              cache: false,
              contentType: false,
              processData: false,
              data: formData,
              type: "post",
              success: function(data){
                //console.log("php return data:\n" + data);
                const obj = JSON.parse(data);

                if (obj.status !== "success") {
                  showErrorModal(obj.msg);
                  return;
                }

                // Get URLs to be send to the db
                modelValue = obj.modelURLs;
                photoValue = obj.photoURL;

                updateItem();

                // Close the editable card and unset the current artwork
                closeEditCard();

                // Reload the artworks
                search();
              },
              error: function() {
                showErrorModal("An error occurred!");
              }
            });
          }
          // Else directly update item
          else {
            updateItem();

            // Close the editable card and unset the current artwork
            closeEditCard();

            // Reload the artworks
            search();
          }
        }

        // Update the item of the DB
        function updateItem() {
          if (!artwork) return;

          const params = {
            TableName: "ARte_Artworks",
            Key: {
              "artworkID": artwork.artworkID
            },
            UpdateExpression: "set #dt = :dt, title = :t, author = :a, description = :d, room = :r, #m = :m, photo = :p, keyword = :k",
            ExpressionAttributeNames: {
              "#dt": "datetime",
              "#m":  "model3D"
            },
            ExpressionAttributeValues:{
              ":dt": getDatetime(),
              ":t":  titleValue,
              ":a":  authorValue,
              ":d":  descriptionValue,
              ":r":  roomValue,
              ":m":  modelValue,
              ":p":  photoValue,
              ":k":  titleValue.toLowerCase()
            },
            ReturnValues:"UPDATED_NEW"
          };

          docClient.update(params, function(err, data) {
            if (err) {
              console.log(JSON.stringify(err, undefined, 2));
              showErrorModal("An error occurred!");
            }
            else
              showSuccessModal("The artwork has been submitted!");
          });
        }

        // When the Delete button is clicked, delete the artwork from the DB
        document.getElementById("btnDelete").onclick = function () {
          swal({
            title: "Are you sure?",
            text: "You will not be able to undo this action!",
            icon: "warning",
            dangerMode: true,
            buttons: {
              cancel: {
                text: "Cancel",
                value: false,
                visible: true,
                className: "btn btn-default",
                closeModal: true
              },
              confirm: {
                text: "Yes, delete it",
                value: true,
                visible: true,
                className: "btn btn-danger",
                closeModal: true
              }
           }
         })
        .then((willDelete) => {
          if (willDelete) {
            deleteItem();
          }
        });
      }

      function deleteItem() {
        if (!artwork) return;

        // Send delete to the backend
        const params = {
          TableName: "ARte_Artworks",
          Key: {
            "artworkID": artwork.artworkID
          }
        };

        docClient.delete(params, function(err, data) {
          if (err)
            showErrorModal("An error occurred!");
          else {
            showSuccessModal("The artwork has been deleted!");

            // Remove the card from the list
            $("#" + artwork.artworkID).parent().parent().remove();

            // Remove the artwork from the map
            artworks.delete(artwork.artworkID);

            // Set the number of results found
            const n = artworks.size;
            let s = "<b>" + n + "</b>";
            s += n > 1 ? " Results found" : " Result found";
            searchResultTitleJQ.html(s);

            // Remove photo and model files from the server
            removeFiles();

            // Close the editable card and unset the current artwork
            closeEditCard();
          }
        });
       }

       // Remove photo and model files from the server
       function removeFiles() {
         if (!artwork)  return;

         const data = new FormData();
         data.append("title", artwork.title);

         $.ajax({
           url: "../files/assets/php/removeArtwork.php", // point to server-side PHP script
           dataType: "text",  // what to expect back from the PHP script, if anything
           cache: false,
           contentType: false,
           processData: false,
           data: data,
           type: "post",
           success: function(data){
             //console.log("php return data:\n" + data);
           },
           error: function() {
             console.log("php error while removing the artwork from the server");
           }
         });
       }

      }
    </script>

    <script src="..\files\assets\js\pcoded.min.js"></script>
    <script src="..\files\assets\js\vartical-layout.min.js"></script>
    <script src="..\files\assets\js\jquery.mCustomScrollbar.concat.min.js"></script>
    <script type="text/javascript" src="..\files\assets\js\script.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-23581568-13');
</script>
</body>

</html>
