<!DOCTYPE html>
<html lang="en">

    <head>
        <title>ARte Dashboard</title>
        <!-- HTML5 Shim and Respond.js IE10 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 10]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
      <![endif]-->
        <!-- Meta -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="Dashboard of the ARte web app">
        <meta name="keywords" content="">
        <meta name="author" content="ARte team">
        <!-- Favicon icon -->
        <link rel="icon" href="..\files\assets\images\favicon.ico" type="image/x-icon">
        <!-- Google font-->
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet">
        <!-- Required Fremwork -->
        <link rel="stylesheet" type="text/css" href="..\files\bower_components\bootstrap\css\bootstrap.min.css">
        <!-- feather Awesome -->
        <link rel="stylesheet" type="text/css" href="..\files\assets\icon\feather\css\feather.css">
        <!-- Style.css -->
        <link rel="stylesheet" type="text/css" href="..\files\assets\css\style.css">
        <link rel="stylesheet" type="text/css" href="..\files\assets\css\jquery.mCustomScrollbar.css">
        <!-- AWS SDK -->
        <script src="https://sdk.amazonaws.com/js/aws-sdk-2.7.16.min.js"></script>
    </head>

    <body>
        <!-- Pre-loader start -->
        <div class="theme-loader">
            <div class="ball-scale">
                <div class='contain'>
                    <div class="ring">
                        <div class="frame"></div>
                    </div>
                    <div class="ring">
                        <div class="frame"></div>
                    </div>
                    <div class="ring">
                        <div class="frame"></div>
                    </div>
                    <div class="ring">
                        <div class="frame"></div>
                    </div>
                    <div class="ring">
                        <div class="frame"></div>
                    </div>
                    <div class="ring">
                        <div class="frame"></div>
                    </div>
                    <div class="ring">
                        <div class="frame"></div>
                    </div>
                    <div class="ring">
                        <div class="frame"></div>
                    </div>
                    <div class="ring">
                        <div class="frame"></div>
                    </div>
                    <div class="ring">
                        <div class="frame"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Pre-loader end -->
        <div id="pcoded" class="pcoded">
            <div class="pcoded-overlay-box"></div>
            <div class="pcoded-container navbar-wrapper">

                <nav class="navbar header-navbar pcoded-header">
                    <div class="navbar-wrapper">

                        <div class="navbar-logo">
                            <a class="mobile-menu" id="mobile-collapse" href="#!">
                                <i class="feather icon-menu"></i>
                            </a>
                            <a href="index.htm">
                                <!--<img class="img-fluid" src="..\files\assets\images\logo.png" alt="Theme-Logo">-->
                                <img class="img-fluid" src="..\files\assets\images\arte_logo.png" alt="Logo">
                            </a>
                            <a class="mobile-options">
                                <i class="feather icon-more-horizontal"></i>
                            </a>
                        </div>

                        <div class="navbar-container container-fluid">
                            <ul class="nav-left">
                                <li class="header-search">
                                    <div class="main-search morphsearch-search">
                                        <div class="input-group">
                                            <span class="input-group-addon search-close"><i
                                                    class="feather icon-x"></i></span>
                                            <input type="text" class="form-control">
                                            <span class="input-group-addon search-btn"><i
                                                    class="feather icon-search"></i></span>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="#!" onclick="javascript:toggleFullScreen()">
                                        <i class="feather icon-maximize full-screen"></i>
                                    </a>
                                </li>
                            </ul>
                            <ul class="nav-right">
                                <li class="header-notification">
                                    <div class="dropdown-primary dropdown">
                                        <div class="dropdown-toggle" data-toggle="dropdown">
                                            <i class="feather icon-bell"></i>
                                            <span class="badge bg-c-pink">5</span>
                                        </div>
                                        <ul class="show-notification notification-view dropdown-menu"
                                            data-dropdown-in="fadeIn" data-dropdown-out="fadeOut">
                                            <li>
                                                <h6>Notifications</h6>
                                                <label class="label label-danger">New</label>
                                            </li>
                                            <li>
                                                <div class="media">
                                                    <img class="d-flex align-self-center img-radius"
                                                        src="..\files\assets\images\avatar-4.jpg"
                                                        alt="Generic placeholder image">
                                                    <div class="media-body">
                                                        <h5 class="notification-user">John Doe</h5>
                                                        <p class="notification-msg">Lorem ipsum dolor sit amet,
                                                            consectetuer elit.</p>
                                                        <span class="notification-time">30 minutes ago</span>
                                                    </div>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="media">
                                                    <img class="d-flex align-self-center img-radius"
                                                        src="..\files\assets\images\avatar-3.jpg"
                                                        alt="Generic placeholder image">
                                                    <div class="media-body">
                                                        <h5 class="notification-user">Joseph William</h5>
                                                        <p class="notification-msg">Lorem ipsum dolor sit amet,
                                                            consectetuer elit.</p>
                                                        <span class="notification-time">30 minutes ago</span>
                                                    </div>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="media">
                                                    <img class="d-flex align-self-center img-radius"
                                                        src="..\files\assets\images\avatar-4.jpg"
                                                        alt="Generic placeholder image">
                                                    <div class="media-body">
                                                        <h5 class="notification-user">Sara Soudein</h5>
                                                        <p class="notification-msg">Lorem ipsum dolor sit amet,
                                                            consectetuer elit.</p>
                                                        <span class="notification-time">30 minutes ago</span>
                                                    </div>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                                <li class="header-notification">
                                    <div class="dropdown-primary dropdown">
                                        <div class="displayChatbox dropdown-toggle" data-toggle="dropdown">
                                            <i class="feather icon-message-square"></i>
                                            <span class="badge bg-c-green">3</span>
                                        </div>
                                    </div>
                                </li>
                                <li class="user-profile header-notification">
                                    <div class="dropdown-primary dropdown">
                                        <div class="dropdown-toggle" data-toggle="dropdown">
                                            <img src="..\files\assets\images\avatar-4.jpg" class="img-radius"
                                                alt="User-Profile-Image">
                                            <span>John Doe</span>
                                            <i class="feather icon-chevron-down"></i>
                                        </div>
                                        <ul class="show-notification profile-notification dropdown-menu"
                                            data-dropdown-in="fadeIn" data-dropdown-out="fadeOut">
                                            <li>
                                                <a href="#!">
                                                    <i class="feather icon-settings"></i> Settings
                                                </a>
                                            </li>
                                            <li>
                                                <a href="user-profile.htm">
                                                    <i class="feather icon-user"></i> Profile
                                                </a>
                                            </li>
                                            <li>
                                                <a href="email-inbox.htm">
                                                    <i class="feather icon-mail"></i> My Messages
                                                </a>
                                            </li>
                                            <li>
                                                <a href="auth-lock-screen.htm">
                                                    <i class="feather icon-lock"></i> Lock Screen
                                                </a>
                                            </li>
                                            <li>
                                                <a href="auth-normal-sign-in.htm">
                                                    <i class="feather icon-log-out"></i> Logout
                                                </a>
                                            </li>
                                        </ul>

                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>

                <!-- Sidebar chat start -->
                <div id="sidebar" class="users p-chat-user showChat">
                    <div class="had-container">
                        <div class="card card_main p-fixed users-main">
                            <div class="user-box">
                                <div class="chat-inner-header">
                                    <div class="back_chatBox">
                                        <div class="right-icon-control">
                                            <input type="text" class="form-control  search-text"
                                                placeholder="Search Friend" id="search-friends">
                                            <div class="form-icon">
                                                <i class="icofont icofont-search"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="main-friend-list">
                                    <div class="media userlist-box" data-id="1" data-status="online"
                                        data-username="Josephin Doe" data-toggle="tooltip" data-placement="left"
                                        title="Josephin Doe">
                                        <a class="media-left" href="#!">
                                            <img class="media-object img-radius img-radius"
                                                src="..\files\assets\images\avatar-3.jpg"
                                                alt="Generic placeholder image ">
                                            <div class="live-status bg-success"></div>
                                        </a>
                                        <div class="media-body">
                                            <div class="f-13 chat-header">Josephin Doe</div>
                                        </div>
                                    </div>
                                    <div class="media userlist-box" data-id="2" data-status="online"
                                        data-username="Lary Doe" data-toggle="tooltip" data-placement="left"
                                        title="Lary Doe">
                                        <a class="media-left" href="#!">
                                            <img class="media-object img-radius"
                                                src="..\files\assets\images\avatar-2.jpg"
                                                alt="Generic placeholder image">
                                            <div class="live-status bg-success"></div>
                                        </a>
                                        <div class="media-body">
                                            <div class="f-13 chat-header">Lary Doe</div>
                                        </div>
                                    </div>
                                    <div class="media userlist-box" data-id="3" data-status="online"
                                        data-username="Alice" data-toggle="tooltip" data-placement="left" title="Alice">
                                        <a class="media-left" href="#!">
                                            <img class="media-object img-radius"
                                                src="..\files\assets\images\avatar-4.jpg"
                                                alt="Generic placeholder image">
                                            <div class="live-status bg-success"></div>
                                        </a>
                                        <div class="media-body">
                                            <div class="f-13 chat-header">Alice</div>
                                        </div>
                                    </div>
                                    <div class="media userlist-box" data-id="4" data-status="online"
                                        data-username="Alia" data-toggle="tooltip" data-placement="left" title="Alia">
                                        <a class="media-left" href="#!">
                                            <img class="media-object img-radius"
                                                src="..\files\assets\images\avatar-3.jpg"
                                                alt="Generic placeholder image">
                                            <div class="live-status bg-success"></div>
                                        </a>
                                        <div class="media-body">
                                            <div class="f-13 chat-header">Alia</div>
                                        </div>
                                    </div>
                                    <div class="media userlist-box" data-id="5" data-status="online"
                                        data-username="Suzen" data-toggle="tooltip" data-placement="left" title="Suzen">
                                        <a class="media-left" href="#!">
                                            <img class="media-object img-radius"
                                                src="..\files\assets\images\avatar-2.jpg"
                                                alt="Generic placeholder image">
                                            <div class="live-status bg-success"></div>
                                        </a>
                                        <div class="media-body">
                                            <div class="f-13 chat-header">Suzen</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Sidebar inner chat start-->
                <div class="showChat_inner">
                    <div class="media chat-inner-header">
                        <a class="back_chatBox">
                            <i class="feather icon-chevron-left"></i> Josephin Doe
                        </a>
                    </div>
                    <div class="media chat-messages">
                        <a class="media-left photo-table" href="#!">
                            <img class="media-object img-radius img-radius m-t-5"
                                src="..\files\assets\images\avatar-3.jpg" alt="Generic placeholder image">
                        </a>
                        <div class="media-body chat-menu-content">
                            <div class="">
                                <p class="chat-cont">I'm just looking around. Will you tell me something about yourself?
                                </p>
                                <p class="chat-time">8:20 a.m.</p>
                            </div>
                        </div>
                    </div>
                    <div class="media chat-messages">
                        <div class="media-body chat-menu-reply">
                            <div class="">
                                <p class="chat-cont">I'm just looking around. Will you tell me something about yourself?
                                </p>
                                <p class="chat-time">8:20 a.m.</p>
                            </div>
                        </div>
                        <div class="media-right photo-table">
                            <a href="#!">
                                <img class="media-object img-radius img-radius m-t-5"
                                    src="..\files\assets\images\avatar-4.jpg" alt="Generic placeholder image">
                            </a>
                        </div>
                    </div>
                    <div class="chat-reply-box p-b-20">
                        <div class="right-icon-control">
                            <input type="text" class="form-control search-text" placeholder="Share Your Thoughts">
                            <div class="form-icon">
                                <i class="feather icon-navigation"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Sidebar inner chat end-->
                <div class="pcoded-main-container">
                    <div class="pcoded-wrapper">
                        <nav class="pcoded-navbar">
                            <div class="pcoded-inner-navbar main-menu">
                                <!-- Additions -->
                                <div class="pcoded-navigatio-lavel">Dashboard</div>
                                <ul class="pcoded-item pcoded-left-item">
                                    <li class="pcoded-hasmenu active pcoded-trigger">
                                        <a href="javascript:void(0)">
                                            <span class="pcoded-micon"><i class="feather icon-activity"></i></span>
                                            <span class="pcoded-mtext">Analytics</span>
                                        </a>
                                        <ul class="pcoded-submenu">
                                          <li>
                                              <a href="artworks.htm">
                                                  <span class="pcoded-mtext">Artworks</span>
                                              </a>
                                          </li>
                                          <li>
                                              <a href="index.htm">
                                                  <span class="pcoded-mtext">General</span>
                                              </a>
                                          </li>
                                          <li class="active">
                                              <a href="rooms.htm">
                                                  <span class="pcoded-mtext">Rooms</span>
                                              </a>
                                          </li>
                                          <li>
                                              <a href="">
                                                  <span class="pcoded-mtext">Features</span>
                                              </a>
                                          </li>
                                        </ul>
                                    </li>
                                    <li class="pcoded-hasmenu">
                                        <a href="javascript:void(0)">
                                            <span class="pcoded-micon"><i class="feather icon-sliders"></i></span>
                                            <span class="pcoded-mtext">Manage artworks</span>
                                        </a>
                                        <ul class="pcoded-submenu">
                                            <li>
                                                <a href="manage_artworks_add.htm">
                                                    <span class="pcoded-mtext">Add</span>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="manage_artworks_edit.htm">
                                                    <span class="pcoded-mtext">Edit</span>
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </nav>


                        <div class="pcoded-content">
                            <div class="pcoded-inner-content">
                              <!-- Main-body start -->
                              <div class="main-body">
                                  <div class="page-wrapper">

                                        <!--<div style="padding:15px;">
                                            <select id="selectRoom">
                                                <option disabled selected value> Select a Room </option>
                                            </select>
                                        </div>
                                        <br>-->

                                        <div class="page-body">
                                            <!-- OLD -->
                                            <!--<div class="row">
                                                <div class="col-xl-3 col-md-6">
                                                    <select id="selectRoom">
                                                        <option disabled selected value> Select a Room </option>
                                                    </select>
                                                </div>
                                            </div>
                                            <br>-->

                                            <div class="row">
                                                <!-- statistic-card start -->
                                                <!-- OLD -->
                                                <!--<div id="currentCard" class="col-xl-3 col-md-6" style="display:none;">

                                                    <div class="card bg-c-yellow text-white">
                                                        <div class="card-block">
                                                            <div class="row align-items-center">
                                                                <div class="col">
                                                                    <p class="m-b-5">Current Number</p>
                                                                    <h4 id="current" class="m-b-0"></h4>
                                                                </div>
                                                                <div class="col col-auto text-right">
                                                                    <i class="feather icon-user f-50 text-c-yellow"></i>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>-->
                                                <!-- /OLD -->

                                                <div class="col-sm-12">
                                                  <h4 id="dateTime" class="m-b-20">Last update: <b>18/10/2020 19:34:28</b></h4>
                                                </div>

                                                <!-- Room number ok -->
                                                <div class="col-md-6 col-lg-3">
                                                    <div class="card statustic-card">
                                                        <div class="card-header">
                                                            <h5>Room 1</h5>
                                                        </div>
                                                        <div class="card-block text-center">
                                                            <span class="d-block text-c-green f-36">15</span>
                                                            <p class="m-b-0">Current visitors</p>

                                                            <div class="widget-statstic-card">
                                                              <div class="text-right">
                                                                <span class="f-right bg-c-green">56%</span>
                                                              </div>
                                                            </div>

                                                            <div class="progress">
                                                                <div class="progress-bar bg-c-green" style="width:56%"></div>
                                                            </div>
                                                        </div>
                                                        <div class="card-footer bg-c-green">
                                                            <h6 class="text-white m-b-0">Total visitors: 3423</h6>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- /Room number ok -->

                                                <!-- Room number alert -->
                                                <div class="col-md-6 col-lg-3">
                                                    <div class="card statustic-card">
                                                        <div class="card-header">
                                                            <h5>Room 2</h5>
                                                        </div>
                                                        <div class="card-block text-center">
                                                            <span class="d-block text-c-yellow f-36">8</span>
                                                            <p class="m-b-0">Current visitors</p>

                                                            <div class="widget-statstic-card">
                                                              <div class="text-right">
                                                                <span class="f-right bg-c-yellow">75%</span>
                                                              </div>
                                                            </div>

                                                            <div class="progress">
                                                                <div class="progress-bar bg-c-yellow" style="width:75%"></div>
                                                            </div>
                                                        </div>
                                                        <div class="card-footer bg-c-yellow">
                                                            <h6 class="text-white m-b-0">Total visitors: 2947</h6>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- /Room number alert -->

                                                <!-- Room number full -->
                                                <div class="col-md-6 col-lg-3">
                                                    <div class="card statustic-card">
                                                        <div class="card-header">
                                                            <h5>Room 3</h5>
                                                        </div>
                                                        <div class="card-block text-center">
                                                            <span class="d-block text-c-pink f-36">21</span>
                                                            <p class="m-b-0">Current visitors</p>

                                                            <div class="widget-statstic-card">
                                                              <div class="text-right">
                                                                <span class="f-right bg-c-pink">93%</span>
                                                              </div>
                                                            </div>

                                                            <div class="progress">
                                                                <div class="progress-bar bg-c-pink" style="width:93%"></div>
                                                            </div>
                                                        </div>
                                                        <div class="card-footer bg-c-pink">
                                                            <h6 class="text-white m-b-0">Total visitors: 4076</h6>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- /Room number full -->

                                                <!-- Room number full -->
                                                <div class="col-md-6 col-lg-3">
                                                    <div class="card statustic-card">
                                                        <div class="card-header">
                                                            <h5>Room 4</h5>
                                                        </div>
                                                        <div class="card-block text-center">
                                                            <span class="d-block text-c-pink f-36">25</span>
                                                            <p class="m-b-0">Current visitors</p>

                                                            <div class="widget-statstic-card">
                                                              <div class="text-right">
                                                                <span class="f-right bg-c-pink">98%</span>
                                                              </div>
                                                            </div>

                                                            <div class="progress">
                                                                <div class="progress-bar bg-c-pink" style="width:98%"></div>
                                                            </div>
                                                        </div>
                                                        <div class="card-footer bg-c-pink">
                                                            <h6 class="text-white m-b-0">Total visitors: 3829</h6>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- /Room number full -->

                                                <!-- Room number ok -->
                                                <div class="col-md-6 col-lg-3">
                                                    <div class="card statustic-card">
                                                        <div class="card-header">
                                                            <h5>Room 5</h5>
                                                        </div>
                                                        <div class="card-block text-center">
                                                            <span class="d-block text-c-green f-36">12</span>
                                                            <p class="m-b-0">Current visitors</p>

                                                            <div class="widget-statstic-card">
                                                              <div class="text-right">
                                                                <span class="f-right bg-c-green">41%</span>
                                                              </div>
                                                            </div>

                                                            <div class="progress">
                                                                <div class="progress-bar bg-c-green" style="width:41%"></div>
                                                            </div>
                                                        </div>
                                                        <div class="card-footer bg-c-green">
                                                            <h6 class="text-white m-b-0">Total visitors: 3338</h6>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- /Room number ok -->

                                                <!-- OLD -->
                                                <!--<div id="totalCard" class="col-xl-3 col-md-6" style="display:none;">
                                                    <div class="card bg-c-pink text-white">
                                                        <div class="card-block">
                                                            <div class="row align-items-center">
                                                                <div class="col">
                                                                    <p class="m-b-5">Total Number</p>
                                                                    <h4 id="total" class="m-b-0"></h4>
                                                                </div>
                                                                <div class="col col-auto text-right">
                                                                    <i class="feather icon-book f-50 text-c-pink"></i>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>-->
                                                <!-- OLD -->
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Customizable Settings -->
                                    <!--<div id="styleSelector">

                                    </div>-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            window.onload = function () {
                // Configuration with AWS Cognito Identity Credentials.
                AWS.config.region = "us-east-1";
                AWS.config.credentials = new AWS.CognitoIdentityCredentials({
                    IdentityPoolId: "us-east-1:f79208a2-a26f-4c2b-be6d-ec367432dded"
                });

                // Set up connection with DynamoDB.
                var dynamodb = new AWS.DynamoDB();
                var docClient = new AWS.DynamoDB.DocumentClient();

                // List of rooms in the Database.
                var rooms = new Set();

                // Variables to control the people flow
                var currentRoom = null;
                var flag = 0;

                // Parameters for the scan of the DB.
                var params = {
                    ExpressionAttributeNames: {
                        "#id": "id"
                    },
                    ProjectionExpression: '#id',
                    TableName: 'RoomsDB'
                };

                function main() {
                    // Update the cards if a room is selected.
                    if (currentRoom != null)
                        getLatestValue(currentRoom);

                    // Update the select list.
                    docClient.scan(params, function (err, data) {
                        if (err) {
                            console.log("Error", err);
                        } else {

                            var totalRooms = new Set();

                            data.Items.forEach(function (element) {
                                totalRooms.add(element.id);
                            });

                            totalRooms = Array.from(totalRooms);
                            totalRooms.sort();

                            var numRooms = Object.keys(totalRooms).length;

                            if (flag)
                                $('#selectRoom').empty();

                            flag = 1;

                            var i;
                            for (i = 0; i < numRooms; i++) {
                                $('#selectRoom').append($('<option>', {
                                    value: totalRooms[i],
                                    text: 'Room ' + totalRooms[i]
                                }));
                            }
                            var optionValue = currentRoom;
                            $("#selectRoom").val(optionValue)
                                .find("option[value=" + optionValue + "]").attr('selected', true);
                        }
                    });

                    /* function changeRoom() {
                        var currentRoom = document.getElementById("selectRoom").value;
                        document.getElementById("currentNum").style.display = "block";
                        document.getElementById("totalNum").style.display = "block";

                        function updateRoom() {
                            getLatestValue(currentRoom);
                            setTimeout(updateRoom, 5000);
                        }
                        updateRoom();
                    } */

                    $('#selectRoom').on('change', function () {
                        currentRoom = $('#selectRoom').val();
                        document.getElementById("currentCard").style.display = "block";
                        document.getElementById("totalCard").style.display = "block";
                        getLatestValue(currentRoom);
                    });


                    function getLatestValue(currentRoom) {

                        rooms = new Set();

                        docClient.scan(params, onScan);

                        // Function that scans the table RoomsDB,
                        // then adds the ID of the rooms in the list 'rooms'
                        function onScan(err, data) {
                            if (err) {
                                console.log("Error", err);
                            } else {
                                data.Items.forEach(function (element) {
                                    rooms.add(element.id);
                                });
                                rooms = Array.from(rooms);
                                rooms.sort();
                                console.log("success", rooms);

                                rooms.forEach(function (id) {
                                    // Parameters of the query.
                                    var params = {
                                        TableName: "RoomsDB",
                                        ProjectionExpression: "id, #ts, currentNum, totalNum",
                                        KeyConditionExpression: "id = :roomId",
                                        ExpressionAttributeNames: {
                                            "#ts": "timestamp"
                                        },
                                        ExpressionAttributeValues: {
                                            ":roomId": currentRoom
                                        }
                                    };

                                    console.log("prova", currentRoom);


                                    // Query for each room.
                                    docClient.query(params, function (err, data) {
                                        if (err) {
                                            console.log("Error", err);
                                        } else {

                                            // In the variable 'latest' there will be the
                                            // last values inserted in the DB.
                                            // Since that the list is ordered from the oldest to
                                            // the newest value, I have to reverse it.
                                            var latest = data.Items.reverse()[0];
                                            console.log("success");

                                            // Insert latest value for the selected room.
                                            document.getElementById('current').innerHTML = latest.currentNum;
                                            document.getElementById('total').innerHTML = latest.totalNum;
                                        }

                                    });
                                });
                            }
                        };

                    }
                }

                // Refresh the page every 5 seconds
                function refreshPage() {
                    main();
                    setTimeout(refreshPage, 5000);
                }
                refreshPage();
            }
        </script>


        <!-- Required Jquery -->
        <script data-cfasync="false"
            src="..\..\..\cdn-cgi\scripts\5c5dd728\cloudflare-static\email-decode.min.js"></script>
        <script type="text/javascript" src="..\files\bower_components\jquery\js\jquery.min.js"></script>
        <script type="text/javascript" src="..\files\bower_components\jquery-ui\js\jquery-ui.min.js"></script>
        <script type="text/javascript" src="..\files\bower_components\popper.js\js\popper.min.js"></script>
        <script type="text/javascript" src="..\files\bower_components\bootstrap\js\bootstrap.min.js"></script>
        <!-- jquery slimscroll js -->
        <script type="text/javascript"
            src="..\files\bower_components\jquery-slimscroll\js\jquery.slimscroll.js"></script>
        <!-- modernizr js -->
        <script type="text/javascript" src="..\files\bower_components\modernizr\js\modernizr.js"></script>
        <!-- Chart js -->
        <script type="text/javascript" src="..\files\bower_components\chart.js\js\Chart.js"></script>
        <!-- amchart js -->
        <script src="..\files\assets\pages\widget\amchart\amcharts.js"></script>
        <script src="..\files\assets\pages\widget\amchart\serial.js"></script>
        <script src="..\files\assets\pages\widget\amchart\light.js"></script>
        <script src="..\files\assets\js\jquery.mCustomScrollbar.concat.min.js"></script>
        <script type="text/javascript" src="..\files\assets\js\SmoothScroll.js"></script>
        <script src="..\files\assets\js\pcoded.min.js"></script>
        <!-- custom js -->
        <script src="..\files\assets\js\vartical-layout.min.js"></script>
        <script type="text/javascript" src="..\files\assets\pages\dashboard\custom-dashboard.js"></script>
        <script type="text/javascript" src="..\files\assets\js\script.min.js"></script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());

            gtag('config', 'UA-23581568-13');
        </script>
    <!-- Code injected by live-server -->
<script type="text/javascript">
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script></body>

</html>
